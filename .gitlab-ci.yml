image: docker:latest
services:
 - docker:dind

stages:
 - default
 - deploy


default:
  before_script:
    - docker ps -aq
    - docker kill $(docker ps -aq)
    - docker rm $(docker ps -aq)

deploy-backend:
 stage: deploy
 script:
  - docker build --tag "backend" Project/Backend
  - docker run -p 8000:8000 -d backend

deploy-frontend:
 stage: deploy
 script:
  - docker build --tag "frontend" Project/Frontend/Mapper
  - docker run -p 8800:80 -d frontend
  
